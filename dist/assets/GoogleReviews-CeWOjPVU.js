import{j as e}from"./index-DDaLlJ-O.js";import{r as t}from"./react-vendor-DUMDxmrn.js";import{S as s}from"./icons-CB1kmZ21.js";const i="ChIJUQehZpUZ50YRMFClZ11adkM",r=()=>{const[r,a]=t.useState([]),[n,l]=t.useState(!0),[,o]=t.useState(null),[d,c]=t.useState(0),[m,h]=t.useState(0),[u,x]=t.useState(0),[g,p]=t.useState(!0);t.useEffect((()=>{const e=document.getElementById("reviews-section")||document.body,t=new IntersectionObserver((e=>{e[0].isIntersecting&&(v(),t.disconnect())}));return t.observe(e),()=>t.disconnect()}),[]),t.useEffect((()=>{let e;return g&&r.length>3&&(e=setInterval((()=>{h((e=>(e+1)%r.length))}),5e3)),()=>clearInterval(e)}),[g,r.length]);const v=async()=>{try{let e=await fetch("/.netlify/functions/google-reviews",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({placeId:i})});if(e.ok||(e=await fetch(`/.netlify/functions/google-reviews?placeId=${encodeURIComponent(i)}`)),e.ok){const t=await e.json(),s=Array.isArray(t.reviews)?t.reviews:[];if(s.length>0){const e=[...s].sort(((e,t)=>t.time-e.time));return a(e),c(t.rating||0),x(t.user_ratings_total||e.length),void l(!1)}}}catch(e){}b()},b=()=>{const e=[{author_name:"Tomas Petrauskas",profile_photo_url:"",rating:5,relative_time_description:"prieš mėnesį",text:"Labai operatyvus ir profesionalus aptarnavimas. Atvyko laiku ir greitai išnešė seną šaldytuvą.",time:Date.now()/1e3-2592e3},{author_name:"Laura Kazlauskienė",profile_photo_url:"",rating:5,relative_time_description:"prieš 2 mėnesius",text:"Puiki paslauga! Išvežė seną skalbimo mašiną ir indaplovę. Rekomenduoju visiems.",time:Date.now()/1e3-5184e3},{author_name:"Marius Jonaitis",profile_photo_url:"",rating:4,relative_time_description:"prieš 3 mėnesius",text:"Greitai ir kokybiškai išvežė senus baldus. Labai patenkinti paslaugomis.",time:Date.now()/1e3-7776e3}];a(e),c(4.7),x(e.length),l(!1),o(null)},f=t=>{const i=[];for(let r=1;r<=5;r++)i.push(e.jsx(s,{className:"w-5 h-5 "+(r<=t?"text-yellow-400 fill-yellow-400":"text-gray-300")},r));return i},w=()=>{p(!1),h((e=>(e-1+r.length)%r.length)),setTimeout((()=>p(!0)),1e4)},j=()=>{p(!1),h((e=>(e+1)%r.length)),setTimeout((()=>p(!0)),1e4)};return n?e.jsx("div",{id:"reviews-section",className:"flex justify-center items-center py-16 bg-gray-50",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-[#167d36]"})}):e.jsx("section",{id:"reviews-section",className:"py-16 bg-gray-50",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsx("h2",{className:"text-3xl sm:text-4xl font-bold text-gray-900 mb-4",children:"Klientų atsiliepimai"}),e.jsx("div",{className:"flex justify-center items-center space-x-1 mb-2",children:f(d)}),e.jsxs("p",{className:"text-lg text-gray-600",children:[d.toFixed(1)," iš 5 (",u," atsiliepimai)"]})]}),e.jsxs("div",{className:"relative",onMouseEnter:()=>p(!1),onMouseLeave:()=>p(!0),children:[r.length>3&&e.jsx("button",{onClick:w,className:"absolute left-0 top-1/2 transform -translate-y-1/2 z-10 bg-white rounded-full p-2 shadow-md text-[#167d36] hover:text-white hover:bg-[#167d36] transition-colors hidden md:block","aria-label":"Ankstesnis atsiliepimas",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",role:"region","aria-label":"Google atsiliepimai",tabIndex:0,onKeyDown:e=>{"ArrowLeft"===e.key?w():"ArrowRight"===e.key&&j()},children:(()=>{if(0===r.length)return[];const e=[],t=Math.min(3,r.length);for(let s=0;s<t;s++){const t=(m+s)%r.length;e.push(r[t])}return e})().map(((t,s)=>e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-lg hover:shadow-xl transition-shadow",itemScope:!0,itemType:"http://schema.org/Review",children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"w-12 h-12 rounded-full bg-blue-100 flex items-center justify-center border-2 border-blue-500",children:e.jsx("span",{className:"text-xl font-bold text-blue-500",children:"G"})})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("h3",{className:"text-lg font-semibold",itemProp:"author",children:t.author_name}),e.jsx("p",{className:"text-gray-500",children:t.relative_time_description})]})]}),e.jsx("div",{className:"flex mb-3",children:f(t.rating)}),e.jsx("p",{className:"text-gray-600",itemProp:"reviewBody",children:t.text.length>200?`${t.text.substring(0,200)}...`:t.text})]},s)))}),r.length>3&&e.jsx("button",{onClick:j,className:"absolute right-0 top-1/2 transform -translate-y-1/2 z-10 bg-white rounded-full p-2 shadow-md text-[#167d36] hover:text-white hover:bg-[#167d36] transition-colors hidden md:block","aria-label":"Kitas atsiliepimas",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})]}),r.length>3&&e.jsx("div",{className:"flex justify-center space-x-2 mt-6",children:r.map(((t,s)=>e.jsx("button",{onClick:()=>{p(!1),h(s),setTimeout((()=>p(!0)),1e4)},className:"w-2 h-2 rounded-full transition-colors "+(s===m?"bg-[#167d36]":"bg-gray-300"),"aria-label":`Peržiūrėti atsiliepimą ${s+1}`},s)))}),e.jsx("div",{className:"mt-8 text-center",children:e.jsx("a",{href:"https://g.page/r/CTBQpWddWnZDEBE/review",target:"_blank",rel:"noopener noreferrer",className:"inline-block bg-white text-[#167d36] px-6 py-3 rounded-lg font-semibold border-2 border-[#167d36] hover:bg-[#167d36] hover:text-white transition-colors",children:"Palikite atsiliepimą"})})]})})};export{r as default};
